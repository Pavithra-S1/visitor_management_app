import{w as C,e as I,g as P,r as s,j as e,B as u,an as T,f as k,ao as F,S as d,T as c,ap as W,I as E,a as B,L as R,c as _,W as q}from"./index-00aebc20.js";import{C as A}from"./Card-5581d361.js";import{T as m}from"./TextField-0d0d1389.js";import{I as M}from"./InputAdornment-c36000c5.js";import{L as V}from"./LoadingButton-dbb2fb4b.js";import"./Select-2ccfb3b7.js";import"./Menu-8e8bcaa8.js";import"./isMuiElement-2ec1e31c.js";import"./Button-03556603.js";function z(){const g=C(),x=I(),{login:p}=P(),[r,h]=s.useState(""),[i,f]=s.useState(""),[j,n]=s.useState(!1),[w,S]=s.useState(!1),[y,a]=s.useState(""),[l,L]=s.useState(!1),v=o=>{o.preventDefault(),a(null),n(!0),r===""||r===null||i===""||i===null?setTimeout(()=>{a("Email and Password is required."),n(!1)},1e3):_.post("/api/login",{email:r,password:i}).then(t=>{S(t.data.status),t.data.status&&(p(t.data.token,t.data.user_data),a(t.data.message),n(!1),x.push("/employees"))}).catch(t=>{console.error("Login error:",t),setTimeout(()=>{t.response.data.status_code===400?a(t.response.data.results.errors[0].msg):a(t.response.data.message),n(!1)},1e3)})},b=e.jsxs(u,{component:"form",noValidate:!0,onSubmit:v,children:[e.jsxs(d,{spacing:3,children:[e.jsx(m,{required:!0,fullWidth:!0,autoFocus:!0,id:"email",name:"email",label:"Email address",margin:"normal",autoComplete:"email",onChange:o=>h(o.target.value)}),e.jsx(m,{id:"password",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",autoComplete:"current-password",type:l?"text":"password",onChange:o=>f(o.target.value),InputProps:{endAdornment:e.jsx(M,{position:"end",children:e.jsx(E,{onClick:()=>L(!l),edge:"end",children:e.jsx(B,{icon:l?"eva:eye-fill":"eva:eye-off-fill"})})})}})]}),e.jsx(d,{direction:"row",alignItems:"center",justifyContent:"flex-end",sx:{my:3},children:e.jsx(R,{href:"forgot_password",variant:"subtitle2",underline:"hover",sx:{cursor:"pointer"},children:"Forgot password?"})}),e.jsx(V,{fullWidth:!0,loading:j,size:"large",type:"submit",variant:"contained",sx:{mb:1},children:"Login"}),e.jsx(c,{variant:"body2",sx:{fontWeight:600},color:w?"text.success":"error",align:"center",children:y})]});return e.jsxs(u,{sx:{...T({color:k(g.palette.background.default,.9),imgUrl:"/assets/background/overlay_4.jpg"}),height:1},children:[e.jsx(F,{sx:{position:"fixed",top:{xs:16,md:24},left:{xs:16,md:24}}}),e.jsx(d,{alignItems:"center",justifyContent:"center",sx:{height:1},children:e.jsxs(A,{sx:{p:5,width:1,maxWidth:420},children:[e.jsx(c,{variant:"h4",component:"div",my:3,children:"Login to Refex Contacts"}),b]})}),e.jsx(W,{})]})}function X(){return e.jsxs(e.Fragment,{children:[e.jsx(q,{children:e.jsx("title",{children:" Login | Refex Contacts"})}),e.jsx(z,{})]})}export{X as default};
