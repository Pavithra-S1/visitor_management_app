import{d as R,e as B,u as A,r as c,j as e,I as $,a as n,B as i,A as S,T as d,S as a,L as m,f as Q,c as y,W as D}from"./index-00aebc20.js";import{Q as O,h as q}from"./table-no-data-f6fc5645.js";import{C as G}from"./Container-6fbcd7c5.js";import{B as l}from"./Button-03556603.js";import{G as b}from"./Grid2-26de99b5.js";import{C as f}from"./Card-5581d361.js";import"./Tooltip-67cae8cc.js";import"./Popper-95ad79c6.js";import"./Menu-8e8bcaa8.js";import"./Autocomplete-a861e4c5.js";import"./Select-2ccfb3b7.js";import"./usePreviousProps-34b9cb0c.js";import"./TextField-0d0d1389.js";import"./isMuiElement-2ec1e31c.js";import"./Dialog-0245826b.js";import"./DialogTitle-294f3dce.js";import"./Slide-712f2a1e.js";import"./TableSortLabel-b1a0cc73.js";import"./Checkbox-7a3596eb.js";import"./format-number-337f61cf.js";import"./FileSaver.min-16aeda95.js";import"./InputAdornment-c36000c5.js";import"./label-b63efce0.js";function P(){const{employeeId:s}=R(),h=B(),{enqueueSnackbar:p,closeSnackbar:g}=A(),x=c.useRef(null),[t,j]=c.useState({employee_id:0,employee_name:"",designation:"",mobile_number:"",landline:"",email:"",photo:null,is_active:0,company:{company_id:"",company_name:"",company_website:"",company_logo:null},branch:{branch_id:"",branch_name:"",branch_address:"",google_map_link:""}}),[v,k]=c.useState(0);c.useEffect(()=>{(async()=>{try{const r=await y.get(`/api/employees/${s}`);r.data.status&&j(r.data.results[0])}catch(r){console.error("Error fetching employee data:",r),j([])}})()},[s,v]);const u=c.useCallback(o=>e.jsx($,{color:"inherit",onClick:()=>g(o),children:e.jsx(n,{icon:"eva:close-outline"})}),[g]),w=()=>{try{y.patch(`/api/employees/${s}?active=${t.is_active?"0":"1"}`).then(o=>{o.data.status&&(p(o.data.message,{variant:"success",action:u}),k(r=>r+1))}).catch(o=>{p(o.response.data.message,{variant:"error",action:u})})}catch(o){p(o.message,{variant:"error",action:u})}},_=()=>{x.current&&q(x.current,{scale:2}).then(o=>{const r=document.createElement("a");r.href=o.toDataURL("image/png"),r.download=`QRCode_${s}.png`,r.click()}).catch(o=>{console.error("Error generating QR code image:",o)})},C=e.jsx(i,{display:"flex",justifyContent:"center",alignItems:"center",sx:{verticalAlign:"middle"},children:e.jsx(i,{component:"img",alt:"Company Logo",src:t.company.company_logo,sx:{height:"80px"}})}),I=e.jsx(i,{sx:{zIndex:9,mt:5,display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsx(S,{alt:t.employee_name,src:t.photo,sx:{width:150,height:150}})}),W=e.jsxs(i,{children:[e.jsx(d,{variant:"h4",sx:{mt:2,textAlign:"center",color:"comman.black"},children:t.employee_name}),e.jsx(d,{variant:"h5",sx:{textAlign:"center",color:"comman.black"},children:t.designation}),e.jsx(d,{variant:"h5",sx:{textAlign:"center",color:"comman.black"},children:t.company.company_name})]}),E=e.jsx(i,{component:"img",alt:"vcard-preview",src:"/assets/images/covers/Abstract-BG.jpg",sx:{top:0,width:1,height:1,objectFit:"cover",position:"absolute"}}),L=e.jsxs(a,{spacing:2,sx:{mt:5,color:"common.black"},children:[e.jsxs(a,{direction:"row",children:[e.jsx(n,{width:24,icon:"ri:whatsapp-fill",sx:{mr:1.5}}),e.jsx(m,{href:`https://api.whatsapp.com/send?phone=91${t.mobile_number}`,color:"inherit",variant:"subtitle2",underline:"hover",target:"_blank",rel:"noopener noreferrer",sx:{overflow:"hidden",WebkitLineClamp:2,display:"-webkit-box",WebkitBoxOrient:"vertical",typography:"subtitle2"},children:"WhatsApp me"})]}),e.jsxs(a,{direction:"row",children:[e.jsx(n,{width:24,icon:"ic:round-email",sx:{mr:1.5}}),e.jsx(m,{href:`mailto:${t.email}`,color:"inherit",variant:"subtitle2",underline:"hover",target:"_blank",rel:"noopener noreferrer",sx:{overflow:"hidden",WebkitLineClamp:2,display:"-webkit-box",WebkitBoxOrient:"vertical",typography:"subtitle2",color:"common.black"},children:"Email me"})]}),e.jsxs(a,{direction:"row",children:[e.jsx(n,{width:24,icon:"fluent:globe-search-24-filled",sx:{mr:1.5}}),e.jsx(m,{href:t.company.company_website,color:"inherit",variant:"subtitle2",underline:"hover",target:"_blank",rel:"noopener noreferrer",sx:{overflow:"hidden",WebkitLineClamp:2,display:"-webkit-box",WebkitBoxOrient:"vertical",typography:"subtitle2",color:"common.black"},children:t.company.company_website.replace(/^https?:\/\//,"")})]}),e.jsxs(a,{direction:"row",children:[e.jsx(n,{width:24,icon:"mdi:location",sx:{mr:1.5}}),e.jsx(m,{href:t.branch.google_map_link,color:"inherit",variant:"subtitle2",underline:"hover",target:"_blank",rel:"noopener noreferrer",sx:{overflow:"hidden",WebkitLineClamp:2,display:"-webkit-box",WebkitBoxOrient:"vertical",typography:"subtitle2",color:"common.black"},children:t.branch.branch_address})]})]});return e.jsxs(G,{children:[e.jsxs(a,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:5,children:[e.jsx(d,{variant:"h4",children:"Employee Preview"}),e.jsx(a,{direction:"row",alignItems:"center",gap:3,children:e.jsx(l,{onClick:()=>{h.push("/employees/list")},variant:"contained",color:"error",startIcon:e.jsx(n,{icon:"eva:arrow-back-fill"}),children:"Back to list"})})]}),e.jsxs(b,{container:!0,spacing:2,columns:{xs:4,sm:12,md:12},width:"100%",children:[e.jsx(b,{xs:4,sm:6,md:6,display:"flex",justifyContent:"center",alignItems:"center",children:e.jsxs(f,{sx:{width:1,maxWidth:450,height:"100%"},children:[e.jsx(i,{sx:{pt:"calc(100% * 4 / 3)","&:after":{top:0,content:"''",width:"100%",height:"100%",position:"absolute",bgcolor:o=>Q(o.palette.grey[300],.1)}},children:E}),e.jsxs(i,{sx:{p:o=>o.spacing(4),width:1,bottom:0,position:"absolute"},children:[C,I,W,L]})]})}),e.jsx(b,{xs:4,sm:6,md:6,display:"flex",justifyContent:"center",alignItems:"center",children:e.jsx(f,{sx:{p:6,width:1,maxWidth:450,height:"100%"},children:e.jsxs(a,{justifyContent:"center",alignItems:"center",gap:4,children:[e.jsx(i,{ref:x,sx:{p:2},children:e.jsx(i,{sx:{border:"3px solid black",borderRadius:3,p:1},children:e.jsx(O,{value:`http:localhost:3030/vcard/${s}`,logoImage:t.company.company_logo,logoWidth:70,logoHeight:40,size:200,qrStyle:"dots",eyeRadius:10,removeQrCodeBehindLogo:!0})})}),e.jsx(l,{fullWidth:!0,onClick:_,variant:"contained",color:"info",startIcon:e.jsx(n,{icon:"solar:download-minimalistic-line-duotone"}),children:"Download"}),e.jsx(l,{onClick:()=>{h.push(`/employees/edit/${s}`)},variant:"contained",color:"info",fullWidth:!0,startIcon:e.jsx(n,{icon:"solar:pen-bold-duotone"}),children:"Edit"}),e.jsx(l,{onClick:()=>{h.push(`/vcard/${s}`)},disabled:!t.is_active,variant:"contained",color:"info",fullWidth:!0,startIcon:e.jsx(n,{icon:"solar:link-bold-duotone"}),children:"Live Link"}),e.jsx(l,{onClick:w,variant:"contained",color:t.is_active?"error":"success",fullWidth:!0,startIcon:e.jsx(n,{icon:"solar:power-bold-duotone"}),children:t.is_active?"Deactivate":"Activate"})]})})})]})]})}function de(){return e.jsxs(e.Fragment,{children:[e.jsx(D,{children:e.jsx("title",{children:"Employees | Refex Contacts"})}),e.jsx(P,{})]})}export{de as default};
