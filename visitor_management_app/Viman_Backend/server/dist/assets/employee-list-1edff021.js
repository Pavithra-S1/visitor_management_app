import{u as O,r as n,j as e,I as q,a as E,S as y,T as W,R as C,b as w,c as H,W as M}from"./index-00aebc20.js";import{E as V,a as z,b as G,T as J}from"./table-no-data-f6fc5645.js";import{C as K}from"./Container-6fbcd7c5.js";import{B as _}from"./Button-03556603.js";import{C as Q}from"./Card-5581d361.js";import{T as U,a as X,b as Y}from"./TableContainer-aaa292be.js";import{P as Z}from"./Pagination-2368a6d9.js";import"./Grid2-26de99b5.js";import"./isMuiElement-2ec1e31c.js";import"./Tooltip-67cae8cc.js";import"./Popper-95ad79c6.js";import"./Menu-8e8bcaa8.js";import"./Autocomplete-a861e4c5.js";import"./Select-2ccfb3b7.js";import"./usePreviousProps-34b9cb0c.js";import"./TextField-0d0d1389.js";import"./Dialog-0245826b.js";import"./DialogTitle-294f3dce.js";import"./Slide-712f2a1e.js";import"./TableSortLabel-b1a0cc73.js";import"./Checkbox-7a3596eb.js";import"./format-number-337f61cf.js";import"./FileSaver.min-16aeda95.js";import"./InputAdornment-c36000c5.js";import"./label-b63efce0.js";const ee=[{id:"ep.employee_id",label:"Employee ID"},{id:"ep.employee_name",label:"Name"},{id:"ep.mobile_number",label:"Mobile Number"},{id:"ep.landline",label:"Landline"},{id:"ep.designation",label:"designation"},{id:"cp.company_name",label:"Company"},{id:"cpb.branch_name",label:"Branch"},{id:"ep.is_active",label:"Status"},{id:""}];function te(){const{enqueueSnackbar:b,closeSnackbar:f}=O(),[d,p]=n.useState([]),[v,h]=n.useState({}),[u,x]=n.useState(1),[c,k]=n.useState("asc"),[s,r]=n.useState([]),[g,I]=n.useState("ep.employee_id"),[m,T]=n.useState("ep.id"),[l,B]=n.useState("");n.useState(5);const[F,L]=n.useState(0),j=n.useCallback(t=>e.jsx(q,{color:"inherit",onClick:()=>f(t),children:e.jsx(E,{icon:"eva:close-outline"})}),[f]);n.useEffect(()=>{(async()=>{try{await H.get(`/api/employees?field=${g}&search=${l}&sort=${m}&order=${c}&page=${u}`).then(a=>{a.data.status&&(p(a.data.results),h(a.data.info))}).catch(a=>{p([]),h({})})}catch(a){p([]),h({}),b(a.message,{variant:"error",action:j})}})()},[g,l,m,c,u,F,j,b]);const N=(t,a)=>{a!==""&&(k(m===a&&c==="asc"?"desc":"asc"),T(a))},R=t=>{if(t.target.checked){const a=d.map(o=>o.employee_id);r(a);return}r([])},A=(t,a)=>{const o=s.indexOf(a);let i=[];o===-1?i=i.concat(s,a):o===0?i=i.concat(s.slice(1)):o===s.length-1?i=i.concat(s.slice(0,-1)):o>0&&(i=i.concat(s.slice(0,o),s.slice(o+1))),r(i)},P=(t,a)=>{x(a)},D=t=>{I("ep.employee_name"),x(1),B(t.target.value)},S=d,$=!S.length&&!!l;return e.jsxs(K,{maxWidth:"xl",children:[e.jsxs(y,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:5,children:[e.jsx(W,{variant:"h4",children:"Employee List"}),e.jsxs(y,{direction:"row",alignItems:"center",gap:3,children:[e.jsx(_,{href:"/employees/create",variant:"contained",component:C,startIcon:e.jsx(E,{icon:"eva:plus-fill"}),children:"New Employee"}),e.jsx(_,{href:"/employees/inactive",variant:"contained",component:C,children:"View Inactive Employees"})]})]}),e.jsxs(Q,{children:[e.jsx(V,{selectedEmployees:s,setSelectedEmployees:r,numSelected:s.length,filterName:l,onFilterName:D}),e.jsx(w,{children:e.jsx(U,{sx:{overflow:"unset"},children:e.jsxs(X,{sx:{minWidth:800},children:[e.jsx(z,{order:c,orderBy:m,rowCount:d.length,numSelected:s.length,onRequestSort:N,onSelectAllClick:R,headLabel:ee}),e.jsxs(Y,{children:[S.map(t=>e.jsx(G,{setRefresh:L,employeeId:t.employee_id,name:t.employee_name,email:t.email,photo:t.photo,designation:t.designation,mobileNumber:t.mobile_number,landline:t.landline,company:t.company.company_name,branch:t.branch.branch_name,status:t.is_active,selected:s.indexOf(t.employee_id)!==-1,handleClick:a=>A(a,t.employee_id)},t.id)),$&&e.jsx(J,{query:l})]})]})})}),e.jsx(y,{direction:"row",alignItems:"center",justifyContent:"center",my:3,spacing:2,children:e.jsx(Z,{showFirstButton:!0,showLastButton:!0,count:v.totalPage,page:u,onChange:P,variant:"outlined",shape:"rounded"})})]})]})}function Ie(){return e.jsxs(e.Fragment,{children:[e.jsx(M,{children:e.jsx("title",{children:"Employees | Refex Contacts"})}),e.jsx(te,{})]})}export{Ie as default};
