import{d as _,e as C,r as h,j as e,B as r,A as W,T as m,S as n,a,L as l,f as A,c as x,W as B}from"./index-00aebc20.js";import"./table-no-data-f6fc5645.js";import{C as E}from"./Container-6fbcd7c5.js";import{C as L}from"./Card-5581d361.js";import{B as b}from"./Button-03556603.js";import"./Grid2-26de99b5.js";import"./isMuiElement-2ec1e31c.js";import"./Tooltip-67cae8cc.js";import"./Popper-95ad79c6.js";import"./Menu-8e8bcaa8.js";import"./Autocomplete-a861e4c5.js";import"./Select-2ccfb3b7.js";import"./usePreviousProps-34b9cb0c.js";import"./TextField-0d0d1389.js";import"./Dialog-0245826b.js";import"./DialogTitle-294f3dce.js";import"./Slide-712f2a1e.js";import"./TableSortLabel-b1a0cc73.js";import"./Checkbox-7a3596eb.js";import"./format-number-337f61cf.js";import"./FileSaver.min-16aeda95.js";import"./InputAdornment-c36000c5.js";import"./label-b63efce0.js";function I(){const{employeeId:c}=_(),d=C(),[t,p]=h.useState({employee_id:0,employee_name:"",designation:"",mobile_number:"",landline:"",email:"",photo:null,is_active:0,company:{company_id:"",company_name:"",company_website:"",company_logo:null},branch:{branch_id:"",branch_name:"",branch_address:"",google_map_link:""}});h.useEffect(()=>{(async()=>{try{const i=await x.get(`/api/vcard/${c}`);i.data.status&&(i.data.results[0].is_active?p(i.data.results[0]):d.push("/404"))}catch{d.push("/404"),p([])}})()},[c,d]);const u=async()=>{try{const o=await x.get(`/api/download-vcard/${c}`,{responseType:"blob"});if(o.status===200){const i=new Blob([o.data],{type:"text/vcard"}),s=document.createElement("a");s.download=`${t.employee_name}.vcf`,s.href=window.URL.createObjectURL(i),document.body.appendChild(s),s.click(),document.body.removeChild(s)}else console.error("Failed to download vCard:",o.status,o.statusText)}catch(o){console.error("Error fetching vCard:",o)}},y=async()=>{try{navigator.share!==void 0?await navigator.share({title:"Refex Contacts",text:"Check out this link!",url:`/vcard/${c}`}):console.error("Share API not supported in this browser")}catch(o){console.error("Error sharing:",o)}},g=e.jsx(r,{display:"flex",justifyContent:"center",alignItems:"center",sx:{verticalAlign:"middle"},children:e.jsx(r,{component:"img",alt:"Company Logo",src:t.company.company_logo,sx:{mt:3,overflow:"hidden",verticalAlign:"bottom",display:"inline-block",height:"80px"}})}),v=e.jsx(r,{sx:{zIndex:9,mt:5,display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsx(W,{alt:t.employee_name,src:t.photo,sx:{width:150,height:150}})}),f=e.jsxs(r,{children:[e.jsx(m,{variant:"h4",sx:{mt:2,textAlign:"center",color:"comman.black"},children:t.employee_name}),e.jsx(m,{variant:"h5",sx:{textAlign:"center",color:"comman.black"},children:t.designation}),e.jsx(m,{variant:"h5",sx:{textAlign:"center",color:"comman.black"},children:t.company.company_name})]}),j=e.jsx(r,{component:"img",alt:"vcard-preview",src:"/assets/images/covers/Abstract-BG.jpg",sx:{top:0,width:1,height:1,objectFit:"cover",position:"absolute"}}),w=e.jsxs(n,{spacing:2,sx:{mt:5,color:"common.black"},children:[e.jsxs(n,{direction:"row",children:[e.jsx(a,{width:24,icon:"ri:whatsapp-fill",sx:{mr:1.5}}),e.jsx(l,{href:`https://api.whatsapp.com/send?phone=91${t.mobile_number}`,color:"inherit",variant:"subtitle2",underline:"hover",target:"_blank",rel:"noopener noreferrer",sx:{overflow:"hidden",WebkitLineClamp:2,display:"-webkit-box",WebkitBoxOrient:"vertical",typography:"subtitle2"},children:"WhatsApp me"})]}),e.jsxs(n,{direction:"row",children:[e.jsx(a,{width:24,icon:"ic:round-email",sx:{mr:1.5}}),e.jsx(l,{href:`mailto:${t.email}`,color:"inherit",variant:"subtitle2",underline:"hover",target:"_blank",rel:"noopener noreferrer",sx:{overflow:"hidden",WebkitLineClamp:2,display:"-webkit-box",WebkitBoxOrient:"vertical",typography:"subtitle2",color:"common.black"},children:"Email me"})]}),e.jsxs(n,{direction:"row",children:[e.jsx(a,{width:24,icon:"fluent:globe-search-24-filled",sx:{mr:1.5}}),e.jsx(l,{href:t.company.company_website,color:"inherit",variant:"subtitle2",underline:"hover",target:"_blank",rel:"noopener noreferrer",sx:{overflow:"hidden",WebkitLineClamp:2,display:"-webkit-box",WebkitBoxOrient:"vertical",typography:"subtitle2",color:"common.black"},children:t.company.company_website.replace(/^https?:\/\//,"")})]}),e.jsxs(n,{direction:"row",children:[e.jsx(a,{width:24,icon:"mdi:location",sx:{mr:1.5}}),e.jsx(l,{href:t.branch.google_map_link,color:"inherit",variant:"subtitle2",underline:"hover",target:"_blank",rel:"noopener noreferrer",sx:{overflow:"hidden",WebkitLineClamp:2,display:"-webkit-box",WebkitBoxOrient:"vertical",typography:"subtitle2",color:"common.black"},children:t.branch.branch_address})]})]}),k=e.jsx(r,{display:"flex",justifyContent:"center",alignItems:"center",children:e.jsxs(n,{direction:"row",spacing:4,sx:{mt:3},children:[e.jsx(b,{variant:"contained",onClick:u,startIcon:e.jsx(a,{width:24,icon:"solar:user-plus-rounded-bold-duotone"}),sx:{width:150},children:"Save"}),e.jsx(b,{variant:"contained",onClick:y,startIcon:e.jsx(a,{width:24,icon:"solar:share-bold-duotone"}),sx:{width:150},children:"Share"})]})});return e.jsx(E,{maxWidth:"xl",sx:{backgroundColor:"#282829",height:"110vh"},children:e.jsx(n,{direction:"column",alignItems:"center",justifyContent:"space-around",height:"750px",children:e.jsxs(L,{sx:{m:3,width:1,maxWidth:450,height:"100%"},children:[e.jsx(r,{sx:{pt:"calc(100% * 4 / 3)","&:after":{top:0,content:"''",width:"100%",height:"100%",position:"absolute",bgcolor:o=>A(o.palette.grey[300],.1)}},children:j}),e.jsxs(r,{sx:{p:o=>o.spacing(4),width:1,bottom:0,position:"absolute"},children:[g,v,f,w,k]})]})})})}function te(){return e.jsxs(e.Fragment,{children:[e.jsx(B,{children:e.jsx("title",{children:"Employee Visiting Card | Refex Contacts"})}),e.jsx(I,{})]})}export{te as default};
